<div class="container mt-4">
  <h2>Gestion des Appareils</h2>
  <button class="btn btn-primary mb-3" (click)="createDevice()">Ajouter un Appareil</button>

  <table class="table table-bordered table-hover">
    <thead class="table-dark">
    <tr>
      <th>Nom</th>
      <th>Type</th>
      <th>Pièce Associée</th>
      <th>Statut</th>
      <th>Consommation (kWh)</th>
      <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <!-- Liste des appareils -->
    <tr *ngFor="let device of devices">
      <td>{{ device.name }}</td>
      <td>{{ device.type }}</td>
      <td>
        {{ device.room ? device.room.name : 'Aucune pièce associée' }}
      </td>
      <td>{{ device.status === 'on' ? 'Allumé' : 'Éteint' }}</td>
      <td>{{ device.consumption.toFixed(2) }}</td>
      <td>
        <!-- Actions -->
        <div class="d-flex gap-2">
          <button
            *ngIf="device.status === 'off'"
            class="btn btn-success btn-sm"
            (click)="turnOnDevice(device._id)"
          >
            Allumer
          </button>
          <button
            *ngIf="device.status === 'on'"
            class="btn btn-warning btn-sm"
            (click)="turnOffDevice(device._id)"
          >
            Éteindre
          </button>
          <button
            class="btn btn-primary btn-sm"
            (click)="editDevice(device._id)"
          >
            Modifier
          </button>
          <button
            class="btn btn-danger btn-sm"
            (click)="deleteDevice(device._id)"
          >
            Supprimer
          </button>
        </div>
      </td>
    </tr>
    <!-- Message si aucun appareil n'est trouvé -->
    <tr *ngIf="devices.length === 0">
      <td colspan="6" class="text-center text-muted">Aucun appareil trouvé.</td>
    </tr>
    </tbody>
  </table>
</div>
